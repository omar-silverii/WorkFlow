ğŸ“„ CONTEXTO DEL PROYECTO â€” â€œWorkflow Studioâ€ (RESUMEN OFICIAL)
ğŸ§  Objetivo

Plataforma genÃ©rica de workflows empresariales en ASP.NET WebForms + SQL Server, con:

Editor visual de grafos (nodos/edges en JSON)

Motor de ejecuciÃ³n

Tareas humanas

ReanudaciÃ³n de instancias

Bandejas por usuario/rol/scope

Sin hardcode de procesos

ğŸ—ï¸ Arquitectura

UI: ASP.NET WebForms + Bootstrap 5

Auth: Windows Authentication (AD)

Usuario llega como DOMINIO\usuario

DB: SQL Server (base Ãºnica: Workflow)

Motor: Runtime propio (WorkflowRunner / MotorFlujo)

ğŸ“¦ Tablas DEFINITIVAS (no discutir)
WF_Instancia

Id

WF_DefinicionId

Estado

DatosEntrada

DatosContexto

FechaInicio

FechaFin

CreadoPor

TenantId

ProcesoKey

DocTipoId

ScopeKey

EmpresaKey

WF_Tarea

Id

WF_InstanciaId

NodoId

NodoTipo

Titulo

Descripcion

RolDestino

UsuarioAsignado

Estado

Resultado

FechaCreacion

FechaVencimiento

FechaCierre

Datos

ScopeKey

AsignadoA

Seguridad

WF_User

WF_UserPermiso

WF_UsuarioRol

WF_UsuarioScope

ğŸ§© Convenciones CLAVE (NO romper)

InstanciaEstado â‰  TareaEstado

Nunca usar nombres ambiguos (Estado solo)

ProcesoKey viene de WF_Definicion.Codigo

ScopeKey se resuelve por WF_ScopeRegla

Todo es genÃ©rico, no existe â€œorden de compraâ€ hardcodeado

ğŸ—‚ï¸ Stored Procedures YA CREADOS

WF_Gerente_EnCurso_MiAlcance

WF_Gerente_Historial

WF_Instancia_ActualizarBandejas

WF_Tarea_Get
(con alias InstanciaEstado / TareaEstado)

ğŸ§‘â€ğŸ’¼ UI Gerencia

PÃ¡gina:

WF_Gerente_Tareas.aspx

Tabs:

Mis tareas

Por mi rol

Mi alcance

Todas:

Navegan por QueryString

Muestran usuario (OMARD\omard)

Muestran contador de tareas

âš™ï¸ Motor

human.task:

Crea tarea si no existe

Se detiene (wf.detener = true)

Reanuda por wf.startNodeIdOverride

ReanudaciÃ³n vÃ­a:

WorkflowRuntime.ReanudarDesdeTareaAsync